import{j as e,t,o as s,T as a}from"./ui-core-98LrUDJY.js";import{r as i}from"./react-vendor-C2JJ-PBx.js";import{D as r}from"./DisplayAd-Dd1ySfDo.js";import{R as l,I as o,a as n,b as d,T as c,c as m,d as x}from"./ui-form-CnxMZt_m.js";import{c as h,B as u}from"./index-9xUD4G-b.js";import{C as f,a as g,b as p,d as b,c as j}from"./card-DI-TtD42.js";import{R as v}from"./ResultSection-CdZcvMsV.js";import{L as w,I as y,T as N,H as k,U as F,P as S,a as C,b as T,c as I,S as A,V as G}from"./ValueContentSection-DPOkb2q0.js";import{S as z,a as M,b as U,c as R,d as W}from"./select-qek723FU.js";import{A as L}from"./AdsenseAd-CsG5eBEK.js";import"./ui-interactive-D1cGjEFL.js";import"./utils-vendor-DGRArQkR.js";import"./ui-layout-CeblZvLT.js";function P({imageUrl:t,text:s,textSettings:a,textLayers:r,onTextPositionChange:l}){const o=i.useRef(null),n=i.useRef(null),[d,c]=i.useState({width:800,height:600}),[m,x]=i.useState(!1),[h,u]=i.useState({width:0,height:0});i.useEffect(()=>{if(!t)return;const e=new Image;e.onload=()=>{let{width:t,height:s}=e;t>800&&(s=800*s/t,t=800),s>600&&(t=600*t/s,s=600),c({width:t,height:s}),n.current=e,x(!0)},e.crossOrigin="anonymous",e.src=t},[t]),i.useEffect(()=>{if(!m||!o.current||!n.current)return;const e=o.current,t=e.getContext("2d"),i=n.current,{width:l,height:c}=d;e.width=l,e.height=c,t.clearRect(0,0,l,c),t.drawImage(i,0,0,l,c);(Array.isArray(r)&&r.length>0?r:s&&a?[{...a,text:s}]:[]).forEach(e=>{const s=Number(e.fontSize||24),a=e.fontFamily||"Arial",i=e.maxWidthRatio??.95,r=e.lineHeight??1.2,o=e.autoFit??!0;let n=s;t.font=`${n}px ${a}`;const d=Math.round(i*l);let m=g(t,e.text||"",d),x=Math.max(10,Math.round(n*r)),h=m.length*x,p=m.reduce((e,s)=>Math.max(e,t.measureText(s).width),0);if(o){let s=0;for(;h>.95*c&&n>8&&s<50;)n=Math.max(8,Math.floor(.9*n)),t.font=`${n}px ${a}`,x=Math.max(10,Math.round(n*r)),m=g(t,e.text||"",d),h=m.length*x,p=m.reduce((e,s)=>Math.max(e,t.measureText(s).width),0),s++}const b={width:p,height:h};if(u(b),(e.text||"").trim()){const s={...e,fontSize:n};f(t,m,s,l,c,b,x)}})},[m,s,a,d,r]);const f=(e,t,s,a,i,r,l)=>{if(!t||0===t.length)return;const{fontSize:o=24,fontFamily:n="Arial",color:d="#ffffff",strokeColor:c="#000000",strokeWidth:m=2,horizontalAlign:x="center",verticalAlign:h="middle",offsetX:u=0,offsetY:f=0}=s;let g,p;e.font=`${o}px ${n}`,e.textAlign="left",e.textBaseline="top",g="left"===x?0+u:"center"===x?(a-r.width)/2+u:"right"===x?a-r.width+u:(a-r.width)/2+u,p="top"===h?0+f:"middle"===h?(i-r.height)/2+f:"bottom"===h?i-r.height+f:(i-r.height)/2+f,e.fillStyle=d;for(let b=0;b<t.length;b++){const s=t[b],a=p+b*l;m>0&&(e.strokeStyle=c,e.lineWidth=m,e.strokeText(s,g,a)),e.fillText(s,g,a)}},g=(e,t,s)=>{if(!t)return[];const a=t.split("\n").map(e=>e.split(/\s+/)),i=[];for(const r of a){let t="";for(const a of r){const r=t?`${t} ${a}`:a;e.measureText(r).width<=s||!t?t=r:(i.push(t),t=a)}t&&i.push(t)}return i};return e.jsx("div",{className:"w-full flex flex-col items-center",children:e.jsxs("div",{className:"relative border border-gray-300 rounded-lg overflow-hidden bg-gray-100",style:{width:d.width,height:d.height},children:[e.jsx("canvas",{ref:o,width:d.width,height:d.height,className:"block mx-auto",style:{maxWidth:"100%",height:"auto"}}),!m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 text-lg bg-white bg-opacity-80",children:"Loading image..."})]})})}function _({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:h("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function H({className:t,...s}){return e.jsx(l,{"data-slot":"radio-group",className:h("grid gap-3",t),...s})}function Y({className:s,...a}){return e.jsx(o,{"data-slot":"radio-group-item",className:h("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(n,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(t,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function $({canvasSize:t,textSettings:a,onSettingChange:i,showAnimationDropdown:r}){const l=a||{},o=(e,t,s)=>Math.max(t,Math.min(s,e)),n=(e,t)=>{if("fontSize"===e){if(""===t)return void i(e,"");const s=Number(t);if(isNaN(s))return;t=o(s,8,150)}if("strokeWidth"===e){if(""===t)return void i(e,"");const s=Number(t);if(isNaN(s))return;t=o(s,0,5)}i(e,t)};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsx(g,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-5 w-5"}),"Text Settings"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-5 border border-white/20",children:[e.jsx("label",{htmlFor:"custom-font",className:"block font-semibold mb-3 text-gray-800 text-base",children:"Custom Font (TTF/OTF)"}),e.jsx("input",{id:"custom-font",type:"file",accept:".ttf,.otf",onChange:e=>{const t=e.target.files&&e.target.files[0]?e.target.files[0]:null;i("customFontFile",t)},className:"w-full bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 text-base border border-gray-300"}),e.jsx("p",{className:"text-xs text-gray-600 mt-3 leading-relaxed",children:"Upload a .ttf or .otf font file to use for this text. If provided, it will override the selected font family."})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-5 border border-white/20",children:[e.jsxs("label",{htmlFor:"max-width",className:"block font-semibold mb-3 text-gray-800 text-base",children:["Max Text Width",e.jsx("span",{className:"text-sm text-gray-500 ml-2 font-normal",children:"(percentage of image width)"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{id:"max-width",type:"range",min:"40",max:"100",value:Math.round(100*(l.maxWidthRatio??.95)),onChange:e=>i("maxWidthRatio",Number(e.target.value)/100),className:"w-full h-3 bg-gradient-to-r from-indigo-200 via-blue-200 to-cyan-200 rounded-full appearance-none cursor-pointer slider-thumb-indigo"}),e.jsxs("div",{className:"absolute -top-6 left-0 right-0 flex justify-between text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"40%"}),e.jsx("span",{className:"font-medium",children:"100%"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"40",max:"100",value:Math.round(100*(l.maxWidthRatio??.95)),onChange:e=>{const t=Math.max(40,Math.min(100,Number(e.target.value)||95));i("maxWidthRatio",t/100)},className:"w-20 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 text-center font-semibold text-base shadow-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none border border-white/30"}),e.jsx("div",{className:"absolute -bottom-5 left-1/2 transform -translate-x-1/2 text-xs text-gray-500 font-medium",children:"%"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-3 leading-relaxed",children:"Controls the maximum width used for wrapping long text. Decrease if you want narrower captions."})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-5 border border-white/20",children:[e.jsxs("label",{htmlFor:"line-height",className:"block font-semibold mb-3 text-gray-800 text-base",children:["Line Height",e.jsx("span",{className:"text-sm text-gray-500 ml-2 font-normal",children:"(multiplier)"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{id:"line-height",type:"range",min:"1.0",max:"2.0",step:"0.05",value:l.lineHeight??1.2,onChange:e=>i("lineHeight",Number(e.target.value)),className:"w-full h-3 bg-gradient-to-r from-gray-200 via-amber-200 to-orange-200 rounded-full appearance-none cursor-pointer slider-thumb-amber"}),e.jsxs("div",{className:"absolute -top-6 left-0 right-0 flex justify-between text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"1.0"}),e.jsx("span",{className:"font-medium",children:"2.0"})]})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",min:"1",max:"2",step:"0.05",value:l.lineHeight??1.2,onChange:e=>i("lineHeight",Number(e.target.value)||1.2),className:"w-20 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 text-center font-semibold text-base shadow-sm focus:ring-2 focus:ring-amber-500 focus:outline-none border border-white/30"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-3 leading-relaxed",children:"Controls spacing between lines of wrapped text."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{id:"auto-fit",type:"checkbox",checked:l.autoFit??!0,onChange:e=>i("autoFit",e.target.checked)}),e.jsx(w,{htmlFor:"auto-fit",children:"Auto-reduce font size to fit height"})]}),e.jsxs("div",{children:[r&&e.jsxs("div",{children:[e.jsx(w,{htmlFor:"animation-style",children:"Text Animation"}),e.jsxs(z,{id:"animation-style",value:l.animationStyle||"none",onValueChange:e=>n("animationStyle",e),children:[e.jsx(M,{children:e.jsx(U,{})}),e.jsxs(R,{children:[e.jsx(W,{value:"none",children:"None"}),e.jsx(W,{value:"fade",children:"Fade In/Out"}),e.jsx(W,{value:"slide_up",children:"Slide Up"})]})]})]}),e.jsx(w,{htmlFor:"text-content",children:"Text Content"}),e.jsx(_,{id:"text-content",value:l.text,onChange:e=>n("text",e.target.value),placeholder:"Enter your text here...",rows:3})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"font-family",children:"Font Family"}),e.jsxs(z,{value:l.fontFamily,onValueChange:e=>n("fontFamily",e),children:[e.jsx(M,{children:e.jsx(U,{})}),e.jsxs(R,{children:[e.jsx(W,{value:"Arial",children:"Arial"}),e.jsx(W,{value:"Helvetica",children:"Helvetica"}),e.jsx(W,{value:"Times New Roman",children:"Times New Roman"}),e.jsx(W,{value:"Courier New",children:"Courier New"}),e.jsx(W,{value:"Verdana",children:"Verdana"}),e.jsx(W,{value:"Georgia",children:"Georgia"}),e.jsx(W,{value:"Comic Sans MS",children:"Comic Sans MS"}),e.jsx(W,{value:"Impact",children:"Impact"})]})]})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-5 border border-white/20",children:[e.jsxs("label",{htmlFor:"font-size",className:"block font-semibold mb-3 text-gray-800 text-base",children:["Font Size",e.jsx("span",{className:"text-sm text-gray-500 ml-2 font-normal",children:"(pixels)"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{id:"font-size",type:"range",min:"8",max:"150",value:l.fontSize,onChange:e=>n("fontSize",e.target.value),className:"w-full h-3 bg-gradient-to-r from-blue-200 via-purple-200 to-pink-200 rounded-full appearance-none cursor-pointer slider-thumb-blue"}),e.jsxs("div",{className:"absolute -top-6 left-0 right-0 flex justify-between text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Small"}),e.jsx("span",{className:"font-medium",children:"Large"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:l.fontSize||"",onChange:e=>{const t=e.target.value;n("fontSize",t)},min:"8",max:"150",className:"w-20 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 text-center font-semibold text-base shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none border border-white/30"}),e.jsx("div",{className:"absolute -bottom-5 left-1/2 transform -translate-x-1/2 text-xs text-gray-500 font-medium",children:"px"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-3 leading-relaxed",children:"Controls text size. Larger text is more prominent but may cover more of your GIF."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"font-color",children:"Text Color"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("input",{type:"color",id:"font-color",value:l.color,onChange:e=>n("color",e.target.value),className:"w-12 h-8 rounded border"}),e.jsx(y,{type:"text",value:l.color,onChange:e=>n("color",e.target.value),placeholder:"#ffffff"})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"stroke-color",children:"Stroke Color"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("input",{type:"color",id:"stroke-color",value:l.strokeColor,onChange:e=>n("strokeColor",e.target.value),className:"w-12 h-8 rounded border"}),e.jsx(y,{type:"text",value:l.strokeColor,onChange:e=>n("strokeColor",e.target.value),placeholder:"#000000"})]})]})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-5 border border-white/20",children:[e.jsxs("label",{htmlFor:"stroke-width",className:"block font-semibold mb-3 text-gray-800 text-base",children:["Stroke Width",e.jsx("span",{className:"text-sm text-gray-500 ml-2 font-normal",children:"(pixels)"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{id:"stroke-width",type:"range",min:"0",max:"5",value:l.strokeWidth,onChange:e=>n("strokeWidth",e.target.value),className:"w-full h-3 bg-gradient-to-r from-green-200 via-blue-200 to-purple-200 rounded-full appearance-none cursor-pointer slider-thumb-green"}),e.jsxs("div",{className:"absolute -top-6 left-0 right-0 flex justify-between text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"None"}),e.jsx("span",{className:"font-medium",children:"Thick"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:l.strokeWidth||"",onChange:e=>{const t=e.target.value;n("strokeWidth",t)},min:"0",max:"5",className:"w-20 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 text-center font-semibold text-base shadow-sm focus:ring-2 focus:ring-green-500 focus:outline-none border border-white/30"}),e.jsx("div",{className:"absolute -bottom-5 left-1/2 transform -translate-x-1/2 text-xs text-gray-500 font-medium",children:"px"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-3 leading-relaxed",children:"Adds outline to text for better visibility. 0 = no stroke, higher values = thicker outline."})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Horizontal Alignment"}),e.jsxs(H,{value:l.horizontalAlign,onValueChange:e=>n("horizontalAlign",e),className:"flex space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{value:"left",id:"h-left"}),e.jsx(w,{htmlFor:"h-left",children:"Left"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{value:"center",id:"h-center"}),e.jsx(w,{htmlFor:"h-center",children:"Center"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{value:"right",id:"h-right"}),e.jsx(w,{htmlFor:"h-right",children:"Right"})]})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Vertical Alignment"}),e.jsxs(H,{value:l.verticalAlign,onValueChange:e=>n("verticalAlign",e),className:"flex space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{value:"top",id:"v-top"}),e.jsx(w,{htmlFor:"v-top",children:"Top"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{value:"middle",id:"v-middle"}),e.jsx(w,{htmlFor:"v-middle",children:"Middle"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{value:"bottom",id:"v-bottom"}),e.jsx(w,{htmlFor:"v-bottom",children:"Bottom"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"offset-x",children:"Offset X (px)"}),e.jsx(y,{id:"offset-x",type:"number",value:l.offsetX,onChange:e=>n("offsetX",parseInt(e.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"offset-y",children:"Offset Y (px)"}),e.jsx(y,{id:"offset-y",type:"number",value:l.offsetY,onChange:e=>n("offsetY",parseInt(e.target.value)||0)})]})]})]})]}),e.jsxs(f,{className:"mt-6",children:[e.jsx(g,{children:e.jsx(p,{children:"Text Presets"})}),e.jsxs(b,{className:"space-y-2",children:[e.jsx(u,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{n("fontFamily","Impact"),n("fontSize",36),n("color","#ffffff"),n("strokeColor","#000000"),n("strokeWidth",3),n("horizontalAlign","center"),n("verticalAlign","middle"),n("offsetX",0),n("offsetY",0)},children:"Meme Style"}),e.jsx(u,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{n("fontFamily","Arial"),n("fontSize",18),n("color","#000000"),n("strokeColor","#ffffff"),n("strokeWidth",1),n("horizontalAlign","left"),n("verticalAlign","top"),n("offsetX",10),n("offsetY",10)},children:"Subtitle Style"}),e.jsx(u,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{n("fontFamily","Georgia"),n("fontSize",24),n("color","#333333"),n("strokeColor","#ffffff"),n("strokeWidth",0),n("horizontalAlign","center"),n("verticalAlign","bottom"),n("offsetX",0),n("offsetY",-20)},children:"Clean Text"})]})]}),e.jsxs("div",{className:"mt-8 bg-gradient-to-br from-blue-50/80 to-indigo-50/80 backdrop-blur-sm rounded-2xl p-6",children:[e.jsxs("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üí°"}),"Pro Tips for Perfect Text"]}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Font Size"})," 18-36px works well for most text. Larger for headlines, smaller for captions."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Stroke Width"})," 1-3px provides good contrast. Use white stroke on dark backgrounds."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Positioning"})," Use alignment and offsets to place text where it won't interfere with the main action."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Contrast"})," Choose colors that stand out against your GIF background for maximum readability."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Length"})," Keep text concise and readable. Short phrases work better than long sentences."]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Preview"})," Use the preview to see how your text looks before finalizing. Make adjustments as needed!"]})]})]})]})]})}function E(){const[t,s]=i.useState("upload"),[l,o]=i.useState("file"),[n,h]=i.useState(null),[w,y]=i.useState(null),[z,M]=i.useState(!1),[U,R]=i.useState(null),[W,_]=i.useState(null),[H,Y]=i.useState({width:800,height:600}),[E,O]=i.useState({text:"Sample Text",fontSize:24,fontFamily:"Arial",color:"#ffffff",strokeColor:"#000000",strokeWidth:2,horizontalAlign:"center",verticalAlign:"middle",offsetX:0,offsetY:0,x:0,y:0,animationStyle:"none",maxWidthRatio:.95,lineHeight:1.2,autoFit:!0}),[D,q]=i.useState(0),[V,X]=i.useState(""),[B,K]=i.useState([]),[J,Q]=i.useState(-1),[Z,ee]=i.useState(10),[te,se]=i.useState(1),[ae,ie]=i.useState(!1);i.useRef(null);const re=i.useCallback((e,t)=>{O(s=>{const a={...s,[e]:t};return J>=0&&K(s=>s.map((s,a)=>a===J?{...s,[e]:t}:s)),a})},[]),le=i.useCallback((e,t=null)=>{if(!(e&&0!==e.length||t))return;let a;_(null),R(null);let i=null,r=!1;"url"===l&&t?(a=t,h(null),r=!0):(i=e[0],h(i),a=URL.createObjectURL(i)),y(a),s("editing");const o=new FormData;r?o.append("url",a):o.append("file",i,i?.name),fetch("http://localhost:5001/api/gif-metadata",{method:"POST",body:o}).then(e=>e.json()).then(e=>{e.duration&&e.frame_count?(se(e.frame_count),ee(e.duration),ie(!1),q(0),X(e.duration.toFixed(2))):(se(1),ee(10),ie(!0))}).catch(()=>{se(1),ee(10),ie(!0)})},[l]),oe=i.useCallback(e=>{O(t=>({...t,x:e.x,y:e.y})),J>=0&&K(t=>t.map((t,s)=>s===J?{...t,x:e.x,y:e.y}:t))},[]),ne=()=>{s("upload"),h(null),y(null),_(null),R(null),O(e=>({...e,text:"Sample Text",fontSize:24,fontFamily:"Arial",color:"#ffffff",strokeColor:"#000000",strokeWidth:2,horizontalAlign:"center",verticalAlign:"middle",offsetX:0,offsetY:0,x:0,y:0,maxWidthRatio:.95,lineHeight:1.2,autoFit:!0})),q(0),X(""),K([]),Q(-1)};return e.jsx(e.Fragment,{children:e.jsxs(N,{title:"Add Text to GIF",description:"Add multiple text layers, captions, and watermarks to GIFs online. Customize fonts (including custom uploads), colors, position, timing, and animations. Free online GIF text editor.",icon:a,seoProps:{title:"Add Text to GIF - Overlay Text on GIFs Online | EasyGIFMaker",description:"Add multiple text layers, upload custom fonts, and control per-layer timing and animations. Precise alignment, max-width wrapping, and auto-fit for perfect captions and watermarks.",keywords:"add text to gif, multiple text layers gif, custom fonts gif, gif text editor, gif caption, gif watermark, text overlay gif, animated text gif, line height, max width",canonical:"https://easygifmaker.com/add-text"},children:[e.jsx(k,{title:"How to Add Text to GIFs",steps:[{title:"Upload your GIF",description:"Select a GIF file or enter a GIF URL to add text to."},{title:"Customize text properties",description:"Set font, size, color, position, and animation effects."},{title:"Position text precisely",description:"Use the interactive canvas to position your text perfectly."},{title:"Download your enhanced GIF",description:"Get your GIF with professional text overlay!"}]}),"upload"===t&&e.jsx(F,{title:"Upload GIF",description:"Select a GIF file or enter a GIF URL to add text overlay",errorMessage:W,uploadMethod:l,setUploadMethod:o,onFileSelect:e=>le(e),onUrlSubmit:e=>le(null,e),isProcessing:z,supportedFormats:"Supported formats: GIF only",accept:"image/gif",toolName:"GIF"}),"editing"===t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(f,{className:"bg-gradient-to-br from-white to-blue-50/30 shadow-lg",children:[e.jsxs(g,{className:"pb-4",children:[e.jsx(p,{className:"text-2xl font-bold text-gray-800 dark:text-white md:text-xl sm:text-lg",children:"GIF Preview & Text Editor"}),e.jsx(j,{className:"text-gray-600 dark:text-gray-200",children:"Add and customize text overlay on your GIF"})]}),e.jsxs(b,{children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-50/50 to-blue-50/30 rounded-2xl p-6 mb-6 backdrop-blur-sm",children:e.jsx("div",{className:"text-center",children:e.jsx(P,{imageUrl:w,textLayers:B&&B.length>0?B:[{...E}],onTextPositionChange:oe})})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:"Text Layers"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>{const e={...E,startTime:D,endTime:V};K(t=>[...t,e]),Q(B.length)},children:"Add Layer"}),J>=0&&e.jsx(u,{variant:"destructive",onClick:()=>{K(e=>e.filter((e,t)=>t!==J)),Q(-1)},children:"Delete Selected"})]})]}),B.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:B.map((t,s)=>e.jsxs("button",{className:"px-3 py-1 rounded border "+(s===J?"bg-blue-600 text-white":"bg-white text-gray-800"),onClick:()=>{Q(s),O({...t}),q(t.startTime??0),X(t.endTime??"")},children:[(t.text||"Layer").slice(0,16)||"Layer",t.text&&t.text.length>16?"‚Ä¶":""]},s))}):e.jsx("div",{className:"text-sm text-gray-600",children:'No layers yet. Use "Add Layer" to create one from current settings.'})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"mb-2 flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:"Layer Timing"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:["GIF duration: ",Z.toFixed(2),"s, ",te," frames"]})]}),e.jsxs(d,{className:"relative flex items-center select-none touch-none w-full h-8",min:0,max:Z,step:.01,value:[Number(D),Number(V)||Z],onValueChange:([e,t])=>{const s=Number(e),a=Number(t);q(s),X(a),J>=0&&K(e=>e.map((e,t)=>t===J?{...e,startTime:s,endTime:a}:e))},minStepsBetweenThumbs:1,"aria-label":"Text timing range",children:[e.jsx(c,{className:"bg-blue-200 relative grow rounded-full h-2",children:e.jsx(m,{className:"absolute bg-blue-500 rounded-full h-2"})}),e.jsx(x,{className:"block w-5 h-5 bg-blue-600 rounded-full shadow-lg border-2 border-white focus:outline-none"}),e.jsx(x,{className:"block w-5 h-5 bg-purple-600 rounded-full shadow-lg border-2 border-white focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"start-time",className:"block font-semibold mb-1 text-gray-800 dark:text-white",children:"Start Time (seconds)"}),e.jsx("input",{id:"start-time",type:"number",min:"0",max:Number(V)||Z,value:D,onChange:e=>q(Math.max(0,Math.min(Number(e.target.value),Number(V)||Z))),className:"w-full bg-white/90 rounded-lg px-3 py-2 text-base border border-gray-300",placeholder:"0"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"end-time",className:"block font-semibold mb-1 text-gray-800 dark:text-white",children:"End Time (seconds, optional)"}),e.jsx("input",{id:"end-time",type:"number",min:D,max:Z,value:V,onChange:e=>{const t=Math.max(Number(D),Math.min(Number(e.target.value),Z));X(t),J>=0&&K(e=>e.map((e,s)=>s===J?{...e,endTime:t}:e))},className:"w-full bg-white/90 rounded-lg px-3 py-2 text-base border border-gray-300",placeholder:"(leave blank for end of GIF)"})]})]}),ae&&e.jsx("div",{className:"text-xs text-red-500 mt-2",children:"Could not auto-detect GIF duration. Defaulting to 10s. Timing may be inaccurate."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{onClick:ne,variant:"outline",className:"flex-1 bg-white/80 backdrop-blur-sm hover:bg-white transition-all duration-300",children:"Upload Different GIF"}),e.jsx(u,{onClick:async()=>{if(w){M(!0),_(null),s("processing");try{const e=new FormData;"url"===l?e.append("url",w):e.append("file",n,n.name);const t=(B.length>0?B:[{...E,startTime:D,endTime:V}]).map((t,s)=>{const a={text:t.text||"",font_family:t.fontFamily||"Arial",font_size:Number(t.fontSize||24),color:t.color||"#ffffff",stroke_color:t.strokeColor||"#000000",stroke_width:Number(t.strokeWidth||0),horizontal_align:t.horizontalAlign||"center",vertical_align:t.verticalAlign||"middle",offset_x:Number(t.offsetX||0),offset_y:Number(t.offsetY||0),start_time:(void 0!==t.startTime?t.startTime:D)??0,end_time:(void 0!==t.endTime?t.endTime:V)??"",animation_style:t.animationStyle||"none",max_width_ratio:t.maxWidthRatio??.95,line_height:t.lineHeight??1.2,auto_fit:t.autoFit??!0};if(t.customFontFile){const i=`font_${s}`;e.append(i,t.customFontFile,t.customFontFile.name),a.font_field=i}return a});e.append("layers",JSON.stringify(t));const a="http://localhost:5001",i=await fetch(`${a}/api/add-text-layers`,{method:"POST",body:e});if(i.ok){const e=(await i.json()).task_id;let t=null,r=null,l=0;for(;l<60;){const s=await fetch(`${a}/api/task-status/${e}`);if(s.ok){const e=await s.json();if(t=e.state,r=e.result,"SUCCESS"===t&&r)break;if("FAILURE"===t)throw new Error(e.error||"Processing failed.")}await new Promise(e=>setTimeout(e,1e3)),l++}if("SUCCESS"!==t||!r)throw new Error("Timed out waiting for processing.");{const e=await fetch(`${a}/api/download/${r}`);if(!e.ok)throw new Error("Failed to fetch result GIF.");const t=await e.blob(),i=URL.createObjectURL(t);R({previewUrl:i,downloadUrl:`${a}/api/download/${r}`}),s("result")}}else{const e=await i.json();_(e.error||"An unknown error occurred during processing."),s("editing")}}catch(e){_(e.message||"Network error or unexpected issue."),s("editing")}finally{M(!1)}}},disabled:z||!E.text,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:z?"Processing...":"Add Text to GIF"})]})]})]})}),e.jsx("div",{children:e.jsxs(f,{className:"bg-gradient-to-br from-white to-indigo-50/30 shadow-lg",children:[e.jsx(g,{className:"pb-4",children:e.jsxs(p,{className:"flex items-center gap-3 text-xl font-bold text-gray-800 dark:text-white",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg",children:e.jsx(a,{className:"h-5 w-5 text-white"})}),"Text Settings"]})}),e.jsx(b,{children:e.jsx($,{textSettings:E,onSettingChange:re,showAnimationDropdown:!0})})]})})]}),"processing"===t&&e.jsx(S,{title:"Processing Your GIF",description:"Adding text overlay to your GIF..."}),"result"===t&&U&&e.jsx(v,{title:"Your GIF with Text is Ready!",description:"Your GIF has been successfully updated with text overlay.",imageUrl:U.previewUrl,downloadFileName:"gif-with-text.gif",downloadUrl:U.downloadUrl,onReset:ne}),e.jsx(C,{icon:a,title:"Add Text to GIF",description1:"Transform your GIFs with layered text overlays. Add multiple captions, watermarks, and callouts with per-layer timing and animation.",description2:"Customize fonts (including uploads), colors, sizes, alignment, and wrapping. Fine-tune line height, max text width, and auto-fit for crisp, readable captions.",features1:[{emoji:"üß©",text:"Multiple text layers with per-layer settings"},{emoji:"üî§",text:"Custom fonts (.ttf/.otf) per layer"},{emoji:"üéûÔ∏è",text:"Per-layer timing and simple animations"}],features2:[{emoji:"üìê",text:"Max width wrapping, line height, and auto-fit"},{emoji:"‚ö°",text:"Real-time preview and editing"},{emoji:"üíé",text:"High-quality output preservation"}],useCases:[{color:"bg-yellow-400",text:"Add captions and subtitles to GIFs"},{color:"bg-green-400",text:"Create branded watermarks with custom fonts"},{color:"bg-blue-400",text:"Add funny text and memes to GIFs"},{color:"bg-purple-400",text:"Create promotional content with layered callouts"}]}),e.jsx(L,{adSlot:"8336674411",adFormat:"fluid",adLayout:"in-article"}),e.jsx(T,{proTips:[{color:"bg-blue-500",text:"Use Max Text Width and Line Height for readable multi-line captions. Keep Auto-Fit on for smaller GIFs."},{color:"bg-green-500",text:"Prefer short, punchy lines. Multiple short layers often read better than one long paragraph."},{color:"bg-purple-500",text:"Use alignment + offsets to avoid busy regions. Center alignment works well for captions."},{color:"bg-orange-500",text:"Stagger layer timing for storytelling. Simple animations (fade/slide) add polish without distraction."}],faqs:[{question:"What text formats are supported?",answer:"All standard text characters, emojis, and special characters."},{question:"Can I add multiple text elements?",answer:"Yes. Add multiple text layers, each with its own font, styling, position, timing, and animation."},{question:"Can I upload custom fonts?",answer:"Yes. Upload .ttf or .otf for a layer. If a font can‚Äôt be loaded, we‚Äôll fall back to a safe font to keep text legible."},{question:"Will the text quality be preserved?",answer:"Yes, we maintain high quality while adding text overlay."},{question:"Is there a text length limit?",answer:"No hard limit. For readability, keep lines short and use wrapping with Max Text Width and Line Height."},{question:"Why isn‚Äôt my layer visible?",answer:"Check timing (start/end), color contrast, and alignment/offsets. Also ensure the animation isn‚Äôt mid-fade at that moment."}],relatedResources:[{href:"/blog/add-text-to-gifs-guide",icon:"üìù",text:"Adding Text to GIFs Guide"},{href:"/blog/top-5-gif-optimization-tips",icon:"‚ö°",text:"Top 5 GIF Optimization Tips"}]}),e.jsx(I,{commonIssues:[{color:"bg-yellow-500",text:"If a layer isn‚Äôt visible, verify its timing range, color contrast, and alignment/offsets."},{color:"bg-orange-500",text:"If upload fails, check your file format (GIF only) and file size. For custom fonts, use .ttf or .otf."},{color:"bg-red-500",text:"Still having issues?",link:"/contact"}],quickFixes:[{icon:"üé®",text:"Use high contrast colors and a subtle stroke for clarity"},{icon:"üìè",text:"Use Auto-Fit and Max Width to fit within the frame"},{icon:"üìç",text:"Use alignment + offsets to avoid busy areas"}]}),e.jsx(A,{title:"Share Your GIF!",description:"Share your new GIF with text on Instagram, Twitter, TikTok, Facebook, or embed it in your blog or website. Tag us with #EasyGIFMaker for a chance to be featured!"}),e.jsx("div",{className:"my-8 flex justify-center",children:e.jsx(r,{slot:"1125232950",className:"max-w-3xl w-full"})}),e.jsx(G,{toolTitle:"Add Text to GIF",relatedLinks:[{href:"/blog/master-the-art-of-adding-text-to-gifs",label:"Master the Art of Adding Text to GIFs"},{href:"/blog/creative-gif-design-tutorial",label:"Creative GIF Design Tutorial"}],altTools:[{href:"/gif-maker",label:"GIF Maker",desc:"Create GIFs from images or short clips."},{href:"/resize",label:"Resize GIF",desc:"Make your GIF fit any platform."},{href:"/optimize",label:"Optimize GIF",desc:"Reduce size for faster sharing."}]})]})})}export{E as default};
//# sourceMappingURL=AddTextTool-Bzmm6EEB.js.map
